<app-full-page-loader [visible]="isLoading()" />

<div class="calendar-toolbar appoinment-calendar-header">

  <div class="flex items-center space-x-2">
    <button mat-icon-button class="header-back-button" (click)="goBack()">
      <mat-icon>chevron_left</mat-icon>
    </button>
    <span class="form-header-heading">Medicine Details</span>
  </div>

  <div class="btn-group flex items-center justify-center space-x-2">
    <button mat-icon-button color="primary" (click)="clickPrevMonth()" aria-label="Previous">
      <mat-icon>chevron_left</mat-icon>
    </button>

    <button mat-raised-button color="primary" (click)="clickToday()">Today</button>

    <button mat-icon-button color="primary" (click)="clickNextMonth()" aria-label="Next">
      <mat-icon>chevron_right</mat-icon>
    </button>
  </div>

  <h2>
    <ng-container [ngSwitch]="view()">
      <span *ngSwitchCase="CalendarView.Agenda">
        {{ getAgendaHeaderRange() }}
      </span>
      <span *ngSwitchDefault>
        {{ viewDate | calendarDate:(view() + 'ViewTitle'):'en' }}
      </span>
    </ng-container>
  </h2>

  <div class="flex py-2">
    <mat-button-toggle-group [value]="view()" class="toggle-group" (change)="setView($event.value)">
      <mat-button-toggle [value]="CalendarView.Month" class="nav-header-tabs" [ngClass]="{
        'active': activeBtnTwo === 'month',
        'inactive': activeBtnTwo != 'month',
        }">Month</mat-button-toggle>
      <mat-button-toggle [value]="CalendarView.Week" class="nav-header-tabs" [ngClass]="{
        'active': activeBtnTwo === 'week',
        'inactive': activeBtnTwo != 'week',
        }">Week</mat-button-toggle>
      <mat-button-toggle [value]="CalendarView.Day" class="nav-header-tabs" [ngClass]="{
        'active': activeBtnTwo === 'day',
        'inactive': activeBtnTwo != 'day',
        }">Day</mat-button-toggle>
      <mat-button-toggle [value]="CalendarView.Agenda" class="nav-header-tabs" [ngClass]="{
        'active': activeBtnTwo === 'agenda',
        'inactive': activeBtnTwo != 'agenda',
        }">Agenda</mat-button-toggle>
    </mat-button-toggle-group>
  </div>

</div>

<!-- Calendar views -->
<div [ngSwitch]="view()">
  <!-- Month View -->
  <mwl-calendar-month-view *ngSwitchCase="CalendarView.Month" [viewDate]="viewDate" [events]="events"
    [refresh]="refresh" [activeDayIsOpen]="activeDayIsOpen" (dayClicked)="onDayClick($event)"
    [eventActionsTemplate]="eventActionsTemplate">
  </mwl-calendar-month-view>

  <!-- Week View -->
  <mwl-calendar-week-view *ngSwitchCase="CalendarView.Week" [viewDate]="viewDate" [events]="events" [refresh]="refresh">
  </mwl-calendar-week-view>

  <!-- Day View -->
  <mwl-calendar-day-view *ngSwitchCase="CalendarView.Day" [viewDate]="viewDate" [events]="events" [refresh]="refresh">
  </mwl-calendar-day-view>

  <!-- Agenda View -->
  <div *ngSwitchCase="CalendarView.Agenda" class="agenda-view">
    <div *ngFor="let day of getAgendaDays()" class="agenda-day">
      <h3>{{ day | date:'EEEE, dd MMMM yyyy' }}</h3>
      <ul>
        <li *ngFor="let event of getEventsForDay(day)">
          <span class="dot" [style.background]="event.color?.primary"></span>
          {{ event.title }}
        </li>
        <li *ngIf="getEventsForDay(day).length === 0">No events</li>
      </ul>
    </div>
  </div>
</div>

<ng-template #eventActionsTemplate let-event="event">
</ng-template>
