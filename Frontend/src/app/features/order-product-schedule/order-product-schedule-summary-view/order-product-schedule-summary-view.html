<div class="relative">
  <!-- ===== Header Section ===== -->
  <div class="flex items-center justify-between flex-wrap gap-4 mb-6 table-view-header">
    <div class="flex items-center">
      <h1 class="list-page-heading">Medicine Details</h1>
    </div>

    <div class="flex space-x-3">
      <button
        mat-flat-button
        color="primary"
        class="primary-btn-add mr-3"
        [disabled]="isLoading()"
        (click)="openAddReminderDialog()"
        [ngClass]="{ disabled: isLoading() }"
      >
        Add Reminder
      </button>
      <button
        mat-flat-button
        class="primary-btn-add"
        [disabled]="isLoading()"
        (click)="navigateToCalendar()"
        [ngClass]="{ disabled: isLoading() }"
      >
        Calendar View
      </button>
    </div>
  </div>

  <!-- ===== Loader Overlay ===== -->
  <div *ngIf="isLoading()" class="relative">
    <div class="absolute inset-0 bg-white bg-opacity-75 flex items-center justify-center z-10 rounded-lg">
      <div class="flex flex-col items-center">
        <mat-spinner diameter="40"></mat-spinner>
        <p class="mt-2 text-gray-600">Loading Schedule Summary...</p>
      </div>
    </div>
  </div>

  <!-- ===== Card Grid Layout ===== -->
  <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 mt-4" [class.opacity-50]="isLoading()">
    <mat-card
      *ngFor="let element of dataSource.filteredData; let i = index"
      [ngClass]="i % 4 === 0 ? 'card-orange' :
              i % 4 === 1 ? 'card-green' :
              i % 4 === 2 ? 'card-purple' :
              'card-blue'"
      class="transition-transform transform hover:-translate-y-1 hover:shadow-lg rounded-2xl relative overflow-hidden border border-gray-200"
    >
      <!-- Edit Icon (Top Right) -->
      <button
        mat-icon-button
        class="edit-icon-btn"
        (click)="onEdit(element)"
        [disabled]="element.status === 'InProgress'"
        matTooltip="Edit"
      >
        <mat-icon class="text-gray-600">edit</mat-icon>
      </button>

      <!-- Card Header -->
      <mat-card-header class="pb-2 border-b border-gray-200">
        <mat-card-title class="text-base font-semibold text-gray-800">{{ element.productName }}</mat-card-title>
        <mat-card-subtitle class="text-sm text-gray-600">
          <strong>Protocol:</strong> {{ element.protocol }} <br />
          <strong>Medicine Time:</strong> {{ element.time }}
        </mat-card-subtitle>
      </mat-card-header>

      <!-- Card Content -->
      <mat-card-content class="mt-3 space-y-2 text-sm text-gray-700">
        <p><strong>Order Name:</strong> {{ element.orderName }}</p>
        <p><strong>Fulfilled On:</strong> {{ element.orderFulfilled | date: 'mediumDate' }}</p>
        <p><strong>Start Date:</strong> {{ element.startDate | date: 'mediumDate' }}</p>
        <p><strong>End Date:</strong> {{ element.endDate | date: 'mediumDate' }}</p>
        <p>
          <strong>Status:</strong>
          <span>{{ element.status }}</span>
        </p>
      </mat-card-content>
    </mat-card>
  </div>

  <!-- ===== Empty State ===== -->
  <div class="text-center py-8" *ngIf="!dataSource.filteredData.length && !isLoading()">
    <mat-icon class="text-gray-400 text-4xl mb-2">info_outline</mat-icon>
    <p class="text-gray-500">No Schedule Summary data available.</p>
  </div>
</div>
